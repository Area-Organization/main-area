---
title: Services & Automation Engine
---

# Services and Automation Engine

## Supported Services

The backend currently implements the following services in `src/services/`:

1. **GitHub**:
   - _Actions_: `new_issue`, `new_star`.
   - _Reaction_: `create_issue`.
   - _Auth_: OAuth2.
2. **Gmail**:
   - _Actions_: `new_email`, `new_email_with_attachment`.
   - _Reaction_: `send_email`.
   - _Auth_: OAuth2 (Google).
3. **Discord**:
   - _Action_: `on_message` (watches a channel).
   - _Reaction_: `send_message`.
   - _Auth_: Bot Token (API Key).
4. **Spotify**:
   - _Action_: `new_saved_track`.
   - _Reaction_: `add_to_playlist`.
   - _Auth_: OAuth2.
5. **Trello**:
   - _Action_: `new_card_in_list`.
   - _Reaction_: `create_card`.
   - _Auth_: API Key + Token.
6. **Steam**:
   - _Actions_: `new_specials_game`, `top_sellers`.
   - _Reaction_: none.
   - _Auth_: none.
7. **Dropbox**:
   - _Action_: `new_file`.
   - _Reaction_: `upload_file`.
   - _Auth_: API Key + Token.
8. **Drive**:
   - _Action_: `new_file`.
   - _Reaction_: `create_folder`.
   - _Auth_: API Key + Token.
9. **Notion**:
   - _Action_: `new_page`.
   - _Reaction_: `create_page`.
   - _Auth_: API Key + Token.
10. **YouTube**:
    - _Action_: `new_video`.
    - _Reaction_: `add_to_playlist`.
    - _Auth_: API Key + Token.

## Variable Interpolation

The system allows passing dynamic data from the action to the reaction using the module `src/utils/interpolator.ts`.
Each action defines available `variables`.

**Example:**
The GitHub action `new_issue` exposes the variables `{{title}}` and `{{url}}`.
The user can configure a Discord reaction with the message:

> "New issue created: `{{title}}`. Link: `{{url}}`"

During execution, the `HookManager` replaces these placeholders with the actual values.

## HookManager (`src/hooks/manager.ts`)

This is the core of the system:

1. **Startup**: Called in `index.ts`, it launches a loop (`setInterval`) by default every 60 seconds.
2. **Polling**:
   - Fetches all active AREAs (`enabled: true`).
   - For each AREA, instantiates the corresponding action service.
   - Calls `action.check(params, context)`.
3. **Check (`check`)**:
   - The action compares the current state of the external API with stored metadata (`lastCheckedId`, `lastTimestamp`).
   - If a new event is detected, `check` returns `true` and fills `context.actionData`.
   - The `HookManager` updates the metadata in the database.
4. **Execution (`execute`)**:
   - If `check` is positive, the `HookManager` interpolates the reaction parameters with `actionData`.
   - It calls `reaction.execute(processedParams, context)`.
   - It increments the trigger count.
